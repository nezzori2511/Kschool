<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            
            <div class="col-md-12">
              
                <div class="card card-plain">
                    <div class="card-header card-header-danger">
                        <h4 class="card-title mt-0"> Quản lý thông tin người dùng</h4>
                        <div class="example-button-container">
                            <button mat-fab color="primary" routerLink="/admin/createuser" >
                              <mat-icon>create</mat-icon>
                            </button>
                          </div>
                    </div>
                    
                    <div class="card-body">
                        <div class="table-responsive">
                            
                          <div class="example-header">
                            <mat-form-field class="search-input">
                              <input matInput (keyup)="applyFilter($event)" placeholder="Search">
                            </mat-form-field>
                            <mat-form-field class="search-input">
                              <mat-select (selectionChange)="onChange($event)" placeholder="Role">
                                <mat-option  [value]=0 >
                                  All
                                </mat-option>
                                <ng-container *ngFor="let listRoles of listRole">

                                  <mat-option  [value]="listRoles.role_id" >
                                    {{ listRoles.role_name  }}
                                  </mat-option>
                                </ng-container>
                              </mat-select>
                            </mat-form-field>
                          </div>
                            <table matSort mat-table [dataSource]="dataSource" class="table table-hover">

                            
                              <ng-container matColumnDef="user_id">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef> Id</th>
                                <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.user_id}} </td>
                              </ng-container>
                          
                          
                              <ng-container matColumnDef="first_name">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef> First Name </th>
                                <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.first_name}} </td>
                              </ng-container>
                              
                              <ng-container matColumnDef="last_name">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef> Last name </th>
                                <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.last_name}} </td>

                                <ng-container matColumnDef="username">
                                  <th mat-sort-header mat-header-cell *matHeaderCellDef> First Name </th>
                                  <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.username}} </td>
                                </ng-container>
                              </ng-container>
                              
                              <ng-container matColumnDef="email">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef> Email </th>
                                <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.email}} </td>
                              </ng-container>
                          
                              
                              <ng-container matColumnDef="phone_number">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef> Phone </th>
                                <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.phone_number}} </td>
                              </ng-container>
                              <ng-container matColumnDef="role_name">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef> Role </th>
                                <td mat-cell *matCellDef="let taikhoans"> {{taikhoans.role_name}} </td>
                              </ng-container>
                              <ng-container matColumnDef="actions">
                                <th mat-sort-header mat-header-cell *matHeaderCellDef>Actions</th>
                                <td mat-cell *matCellDef="let taikhoan">
                                 
                                <button mat-raised-button type="button" matTooltip="Edit Task" [matTooltipPosition]="'above'" class="btn btn-primary btn-link btn-sm btn-just-icon" (click)="edit(taikhoan)" (click)="openDialog(dialogTemplateedit)" >
                                  <i class="material-icons">edit</i>
                                </button>
                                <button mat-raised-button type="button" matTooltip="Remove" [matTooltipPosition]="'above'" class="btn btn-danger btn-link btn-sm btn-just-icon"   (click)="delete(taikhoan)">
                                    <i class="material-icons">close</i>
                                </button>
                                  
                                </td>
                              </ng-container>
                              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                              <!-- <tr mat-header-row *matHeaderRowDef="['user_id','first_name', 'last_name','username','email','phone_number','role_name', 'actions']"></tr>
                              <tr mat-row *matRowDef="let row; columns: ['user_id','first_name', 'last_name','username','email','phone_number','role_name', 'actions'];"></tr> -->
                            </table>
                            
                            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>
         
                        </div>
                    </div>
                </div>
                

            </div>
        </div>
    </div>
  </div>

    
    <!-- <ng-template #dialogTemplateedit>
        <mat-card *ngIf="selectedTaiKhoan" class="edit-form-card">
          <form [formGroup]="editForm" (ngSubmit)="onSubmitEditForm()">
            <h2 style="text-align: center;">Sửa thông tin người dùng</h2>
            <mat-form-field  class="edit-form-field"  >
              <input matInput type="hidden"  formControlName="account_id" >
            
          
                <input matInput type="hidden"  formControlName="user_id" >
              </mat-form-field>
            <mat-form-field  class="edit-form-field" appearance="fill">
          
              <input matInput   formControlName="username" required>
              
              
              <mat-label>Tài khoản người dùng</mat-label>
            </mat-form-field>
            <mat-form-field  class="edit-form-field" appearance="fill">
          
                <input matInput   formControlName="first_name" required>
                
                
                <mat-label>Điền tài khoản</mat-label>
              </mat-form-field>
              <mat-form-field  class="edit-form-field" appearance="fill">
          
                <input matInput   formControlName="last_name" required>
                
                
                <mat-label>Điền tài khoản</mat-label>
              </mat-form-field>
              <mat-form-field  class="edit-form-field" appearance="fill">
          
                <input matInput   formControlName="email" required>
                <mat-label>Điền tài khoản</mat-label>
                
                
              </mat-form-field>
              <mat-form-field  class="edit-form-field" appearance="fill">
          
                <input matInput   formControlName="phone_number" required>
                <mat-label>Tài khoản người dùng</mat-label>
                
                
              </mat-form-field>
              
            
              
            
            <div class="edit-form-buttons">
              <button mat-raised-button color="primary" type="submit">Save</button>
              <button mat-button color="warn" (click)="cancelEditForm()">Cancel</button>
            </div>
            
          </form>
        </mat-card>
      </ng-template>
       -->
       <ng-template #dialogTemplateedit>
    <mat-card *ngIf="selectedTaiKhoan" class="edit-form-card">
    <form [formGroup]="editForm" (ngSubmit)="onSubmitEditForm()">
      <h2 style="text-align: center;">Sửa thông tin</h2>
      <mat-form-field  class="edit-form-field"  >
        <input matInput type="hidden"  formControlName="account_id" >
        <input matInput type="hidden"  formControlName="user_id" >
      </mat-form-field>
      <mat-form-field  class="edit-form-field" appearance="fill">
        <mat-label>Account</mat-label>
        <input matInput   formControlName="username" required>
        
        
        
      </mat-form-field>
      <mat-form-field  class="edit-form-field" appearance="fill">
        <mat-label>First Name</mat-label>
        <input matInput   formControlName="first_name" required>
        
        
        
      </mat-form-field>
      
      <mat-form-field  class="edit-form-field" appearance="fill">
        <mat-label>Last Name</mat-label>
        <input matInput   formControlName="last_name" required>
        
        
        
      </mat-form-field>
      
      <mat-form-field  class="edit-form-field" appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput   formControlName="email" required>
        
        
        
      </mat-form-field>
      <mat-form-field  class="edit-form-field" appearance="fill">
        <mat-label>Number Phone</mat-label>
        <input matInput   formControlName="phone_number" required>
        
        
     
      </mat-form-field>
      <mat-form-field>
        <mat-label>Role</mat-label>
        <mat-select (selectionChange)="onSelectChangeEdit($event)" [formControl]="editForm.get('selectedOption')">
          <mat-option [value]="null">Chọn chức vụ</mat-option>
          <ng-container *ngFor="let listRoles of listRole">

            <mat-option  [value]="listRoles.role_id" >
              {{ listRoles.role_name  }}
            </mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>
      <div class="edit-form-buttons">
        <button mat-raised-button color="primary" type="submit">Save</button>
        <button mat-button color="warn" (click)="cancelEditForm()">Cancel</button>
      </div>
      
    </form>
  </mat-card>
</ng-template>